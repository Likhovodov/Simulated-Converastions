{% load render_table from django_tables2 %}
{% load static %}
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
              integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
              crossorigin="anonymous">

        <title>Template Management</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Optional JavaScript -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
                integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
                crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
                integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
                crossorigin="anonymous"></script>
        <script src="{% static 'js/jquery.bootstrap.modal.forms.js' %}"></script>
    </head>
    <body>
        {% render_table folderTable %}
        <!-- Create Folder Button--->
        <button id="create-folder" class="btn btn-primary" type="button" name="button">Create Folder</button>
        <br>
        <br>
        {% if folder_pk %}
            <!-- Line these buttons up later with css -->
            <form method="post" action="{% url 'management:main' %}">
                {% csrf_token %}
                <input id="back-to-all" class="btn btn-success" type="submit" value="Back">
            </form>
            <button id="edit-folder" class="bs-modal btn btn-primary" type="button" name="button"
                    data-form-url="{% url 'management:edit_folder' folder_pk %}">Edit</button>
            <form method="post" action="{% url 'management:delete_folder' folder_pk %}">
                {% csrf_token %}
                <input type="hidden" name="back" value="{{ request.path }}">
                <button id="delete-folder" class="btn btn-danger" type="submit">Delete</button>
            </form>
        {% endif %}
        {% render_table templateTable %}
        <button id="create-template" class="btn btn-primary">Create Template</button>

        <!-- Code needed for the modal to work properly.
             Content in folder_creation_modal.html is rendered between "#modal-content" div
        -->
        <div class="modal fade" tabindex="-1" role="dialog" id="create_modal">
            <div class="modal-dialog" role="document">
                <div class="modal-content"></div>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="modal">
            <div class="modal-dialog" role="document">
                <div class="modal-content"></div>
            </div>
        </div>

        <script type="text/javascript">
        $(document).ready(function() {
            $(".bs-modal").each(function () {
                $(this).modalForm({
                    formURL: $(this).data('form-url')
                });
            });
            $("#create-folder").modalForm({
                formURL: "{% url 'management:create_folder' %}",
                modalID: "#create_modal"
            });
        });
        </script>
    </body>
</html>
